@model TitanTechnologyView.Models.VendorDto

@{
    ViewData["Title"] = Model.VendorId == 0 || Model.VendorId == null ? "Add Vendor" : "Edit Vendor";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="SaveVendor" enctype="multipart/form-data" method="post">
    <input type="hidden" asp-for="VendorId" />
    <input type="hidden" asp-for="ExistingGstnUpload" />
    <input type="hidden" asp-for="ExistingPanUpload" />
    <input type="hidden" asp-for="ExistingCancelledCheque" />
    <input type="hidden" asp-for="ExistingAgreement1" />
    <input type="hidden" asp-for="ExistingAgreement2" />
    <input type="hidden" asp-for="ExistingAgreement3" />
    <input type="hidden" asp-for="ExistingAgreement4" />

    <div class="form-group">
        <label asp-for="CompanyCode"></label>
        <input asp-for="CompanyCode" class="form-control" />
        <span asp-validation-for="CompanyCode" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="VendorName"></label>
        <input asp-for="VendorName" class="form-control" />
        <span asp-validation-for="VendorName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Address"></label>
        <textarea asp-for="Address" class="form-control"></textarea>
        <span asp-validation-for="Address" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Gstn"></label>
        <input asp-for="Gstn" class="form-control" />
        <span asp-validation-for="Gstn" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="PanNumber"></label>
        <input asp-for="PanNumber" class="form-control" />
        <span asp-validation-for="PanNumber" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="ContactPersonName"></label>
        <input asp-for="ContactPersonName" class="form-control" />
        <span asp-validation-for="ContactPersonName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="ContactPersonNumber"></label>
        <input asp-for="ContactPersonNumber" class="form-control" />
        <span asp-validation-for="ContactPersonNumber" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="PaymentTerms"></label>
        <input asp-for="PaymentTerms" class="form-control" />
        <span asp-validation-for="PaymentTerms" class="text-danger"></span>
    </div>

    <h4>Bank Details</h4>
    <div class="form-group">
        <label asp-for="AccountHolderName"></label>
        <input asp-for="AccountHolderName" class="form-control" />
        <span asp-validation-for="AccountHolderName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="AccountNumber1"></label>
        <input asp-for="AccountNumber1" class="form-control" />
        <span asp-validation-for="AccountNumber1" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="IfscCode"></label>
        <input asp-for="IfscCode" class="form-control" />
        <span asp-validation-for="IfscCode" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="BankAccountName"></label>
        <input asp-for="BankAccountName" class="form-control" />
        <span asp-validation-for="BankAccountName" class="text-danger"></span>
    </div>

    <h4>File Uploads</h4>
    @foreach (var fileField in new[] {
        ("GstnUpload","ExistingGstnUpload"),
        ("PanUpload","ExistingPanUpload"),
        ("CancelledCheque","ExistingCancelledCheque"),
        ("Agreement1","ExistingAgreement1"),
        ("Agreement2","ExistingAgreement2"),
        ("Agreement3","ExistingAgreement3"),
        ("Agreement4","ExistingAgreement4") })
    {
        <div class="form-group">
            <label>@fileField.Item1</label>
            <input type="file" name="@fileField.Item1" class="form-control" />
            @{
                var existingFile = (string?)Model.GetType().GetProperty(fileField.Item2)?.GetValue(Model, null);
                if (!string.IsNullOrEmpty(existingFile))
                {
                    <p>
                        Existing:
                        <a href="@($"{ViewBag.ApiOrigin}{existingFile}")" target="_blank">
                            @System.IO.Path.GetFileName(existingFile)
                        </a>
                    </p>
                }
            }
        </div>
    }

    <button type="submit" class="btn btn-primary">Save</button>
    <a asp-action="Index" class="btn btn-secondary">Cancel</a>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
